window.GeoJSON=function(c){var b={title:"GeoJSON",version:"1.1",created:"Dan Palmer"},d={},f=0;GeoJSONObj=function(){this.shapes=[];this.prop={};this.error="";this.hide=function(){for(a in this.shapes){this.shapes[a].setMap(null)}};this.show=function(){for(var g in this.shapes){this.shapes[g].setMap(c.googleMap)}};this.remove=function(){for(var g in this.shapes){this.shapes[g].setMap(null);google.maps.event.clearInstanceListeners(this.shapes[g])}this.shapes=[]}};c=c||{};c={googleMap:c.googleMap||null,JSONSrc:c.JSONSrc||{},polygonOptionsCallback:c.polygonOptionsCallback||function(){},polygonEventsCallback:c.polygonEventsCallback||function(){},pointOptionsCallback:c.pointOptionsCallback||function(){},pointEventsCallback:c.pointEventsCallback||function(){},linestringOptionsCallback:c.linestringOptionsCallback||function(){},linestringEventsCallback:c.linestringEventsCallback||function(){},onError:c.onError||function(g,h){alert("Error: "+h)}};if(c.googleMap===null){c.onError(-1,"No map element declared");return{}}_ParseFeatureType=function(j){var k=[];if(j.hasOwnProperty("type")){if(j.type.toLowerCase()==="featurecollection"){if(j.hasOwnProperty("features")){var i=0,g=j.features.length;for(i;i<g;i++){k.push(_ParseFeatureType(j.features[i]))}}else{var h=new GeoJSONObj();h.error="Object does not have a 'Features' property. Incorrect GeoJSON formatting.";c.onError(f,h.error);f++;return h}}else{if(j.type.toLowerCase()==="feature"){var h=_ParseFeature(j);f++;return h}}}else{var h=new GeoJSONObj();h.error="Object does not have a 'Type' property. Incorrect GeoJSON formatting.";c.onError(f,h.error);f++;return h}return k};_ParseFeature=function(g){var h=new GeoJSONObj();h.prop=d=g.properties||{};if(g.hasOwnProperty("geometry")){h.shapes=_ParseGeometry(g.geometry)}else{h.error="Object does not have a 'Geometry' property. No shape files can be created.";c.onError(f,h.error)}return h};_ParseGeometry=function(i){var j=[];if(i.hasOwnProperty("type")){if(i.type.toLowerCase()==="geometrycollection"){var g=0,h=i.geometries.length,m=[];for(g;g<h;g++){m=m.concat(_ParseGeometry(i.geometries[g]))}j=j.concat(m)}else{if(i.type.toLowerCase()==="point"){j.push(_ParsePoint(i.coordinates))}else{if(i.type.toLowerCase()==="multipoint"){var g=0,h=i.coordinates.length;for(g;g<h;g++){j.push(_ParsePoint(i.coordinates[g]))}}else{if(i.type.toLowerCase()==="linestring"){j.push(_ParseLineString(i.coordinates))}else{if(i.type.toLowerCase()==="multilinestring"){var g=0,h=i.coordinates.length;for(g;g<h;g++){j.push(_ParseLineString(i.coordinates[g]))}}else{if(i.type.toLowerCase()==="polygon"){var g=0,h=i.coordinates.length;for(g;g<h;g++){j.push(_ParsePolygon(i.coordinates[g]))}}else{if(i.type.toLowerCase()==="multipolygon"){var g=0,h=i.coordinates.length;for(g;g<h;g++){var l=0,k=i.coordinates[g].length;for(l;l<k;l++){j.push(_ParsePolygon(i.coordinates[g][l]))}}}}}}}}}}return j};_ParsePoint=function(h){var g=c.pointOptionsCallback(d)||{};var j={icon:g.icon||"",shadow:g.shadow||"",title:g.title||"Default"};var i=new google.maps.Marker({map:c.googleMap,position:new google.maps.LatLng(h[1],h[0]),icon:j.icon,shadow:j.shadow,title:j.title});c.pointEventsCallback(i,f,j,d);return i};_ParseLineString=function(j){var k=[],i;var g=c.linestringOptionsCallback(d)||{};var l={strokeColor:g.strokeColor||"#000",strokeOpacity:g.strokeOpacity||"1.0",strokeWeight:g.strokeWeight||"5"};var m=0,h=j.length;for(m;m<h;m++){k.push(new google.maps.LatLng(j[m][1],j[m][0]))}i=new google.maps.Polyline({path:k,strokeColor:l.strokeColor,strokeOpacity:l.strokeOpacity,strokeWeight:l.strokeWeight});i.setMap(c.googleMap);c.linestringEventsCallback(i,f,l,d);return i};_ParsePolygon=function(i){var h=[],j;var m=0,g=i.length;for(m;m<g;m++){h.push(new google.maps.LatLng(i[m][1],i[m][0]))}var l=c.polygonOptionsCallback(d)||{};var k={strokeColor:l.strokeColor||"#FF0000",strokeOpacity:l.strokeOpacity||0.8,strokeWeight:l.strokeWeight||2,fillColor:l.fillColor||"#FF0000",fillOpacity:l.fillOpacity||0.35};j=new google.maps.Polygon({paths:h,strokeColor:k.strokeColor,strokeOpacity:k.strokeOpacity,strokeWeight:k.strokeWeight,fillColor:k.fillColor,fillOpacity:k.fillOpacity});j.setMap(c.googleMap);c.polygonEventsCallback(j,f,k,d);return j};var e=[];e=_ParseFeatureType(c.JSONSrc);return{shapes:e,hide:function(){var g=this.shapes.length;while(g--){this.shapes[g].hide()}},show:function(){var g=this.shapes.length;while(g--){this.shapes[g].show()}},remove:function(){var g=this.shapes.length;while(g--){this.shapes[g].remove()}this.shapes=[]}}};