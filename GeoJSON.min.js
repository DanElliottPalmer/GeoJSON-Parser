window.GeoJSON=function(b){google.maps.Polygon.prototype.update=google.maps.Polyline.prototype.update=google.maps.Marker.prototype.update=function(){var f=this.getMap();this.setMap(null);this.setMap(f)};var a={title:"GeoJSON",version:"1.1",created:"Dan Palmer"},c={},e=0;GeoJSONObj=function(){this.shapes=[];this.prop={};this.error="";this.hide=function(){var f=this.shapes.length;while(f--){this.shapes[f].setMap(null)}};this.show=function(){var f=this.shapes.length;while(f--){this.shapes[f].setMap(b.googleMap)}};this.remove=function(){var f=this.shapes.length;while(f--){this.shapes[f].setMap(null);google.maps.event.clearInstanceListeners(this.shapes[f])}this.shapes=[]};this.getBounds=function(){var h=this.shapes,f=h.length,i=new google.maps.LatLngBounds();while(f--){if(h[f]._GJTYPE=="polygon"){var g=h[f].getPaths().getArray(),k=g.length;while(k--){var j=g[k].length;while(j--){i.extend(new google.maps.LatLng(g[k].getAt(j).lat(),g[k].getAt(j).lng()))}}}else{if(h[f]._GJTYPE=="line"){var g=h[f].getPath().getArray(),k=g.length;while(k--){var j=g[k].length;while(j--){i.extend(new google.maps.LatLng(g[k].getAt(j).lat(),g[k].getAt(j).lng()))}}}else{if(h[f]._GJTYPE=="marker"){i.extend(h[f].getPosition())}}}}return i}};b=b||{};b={googleMap:b.googleMap||null,JSONSrc:b.JSONSrc||{},polygonOptionsCallback:b.polygonOptionsCallback||function(){},polygonEventsCallback:b.polygonEventsCallback||function(){},pointOptionsCallback:b.pointOptionsCallback||function(){},pointEventsCallback:b.pointEventsCallback||function(){},linestringOptionsCallback:b.linestringOptionsCallback||function(){},linestringEventsCallback:b.linestringEventsCallback||function(){},onError:b.onError||function(f,g){alert("Error: "+g)}};if(b.googleMap===null){b.onError(-1,"No map element declared");return{}}_ParseFeatureType=function(i){var j=[];if(i.hasOwnProperty("type")){if(i.type.toLowerCase()==="featurecollection"){if(i.hasOwnProperty("features")){var h=0,f=i.features.length;for(h;h<f;h++){j.push(_ParseFeatureType(i.features[h]))}}else{var g=new GeoJSONObj();g.error="Object does not have a 'Features' property. Incorrect GeoJSON formatting.";b.onError(e,g.error);e++;return g}}else{if(i.type.toLowerCase()==="feature"){var g=_ParseFeature(i);e++;return g}}}else{var g=new GeoJSONObj();g.error="Object does not have a 'Type' property. Incorrect GeoJSON formatting.";b.onError(e,g.error);e++;return g}return j};_ParseFeature=function(f){var g=new GeoJSONObj();g.prop=c=f.properties||{};if(f.hasOwnProperty("geometry")){g.shapes=_ParseGeometry(f.geometry)}else{g.error="Object does not have a 'Geometry' property. No shape files can be created.";b.onError(e,g.error)}return g};_ParseGeometry=function(h){var i=[];if(h.hasOwnProperty("type")){if(h.type.toLowerCase()==="geometrycollection"){var f=0,g=h.geometries.length,l=[];for(f;f<g;f++){l=l.concat(_ParseGeometry(h.geometries[f]))}i=i.concat(l)}else{if(h.type.toLowerCase()==="point"){i.push(_ParsePoint(h.coordinates))}else{if(h.type.toLowerCase()==="multipoint"){var f=0,g=h.coordinates.length;for(f;f<g;f++){i.push(_ParsePoint(h.coordinates[f]))}}else{if(h.type.toLowerCase()==="linestring"){i.push(_ParseLineString(h.coordinates))}else{if(h.type.toLowerCase()==="multilinestring"){var f=0,g=h.coordinates.length;for(f;f<g;f++){i.push(_ParseLineString(h.coordinates[f]))}}else{if(h.type.toLowerCase()==="polygon"){var f=0,g=h.coordinates.length;for(f;f<g;f++){i.push(_ParsePolygon(h.coordinates[f]))}}else{if(h.type.toLowerCase()==="multipolygon"){var f=0,g=h.coordinates.length;for(f;f<g;f++){var k=0,j=h.coordinates[f].length;for(k;k<j;k++){i.push(_ParsePolygon(h.coordinates[f][k]))}}}}}}}}}}return i};_ParsePoint=function(g){var f=b.pointOptionsCallback(c)||{};var i={icon:f.icon||"",shadow:f.shadow||"",title:f.title||"Default"};var h=new google.maps.Marker({map:b.googleMap,position:new google.maps.LatLng(g[1],g[0]),icon:i.icon,shadow:i.shadow,title:i.title,_GJTYPE:"marker"});b.pointEventsCallback(h,e,i,c);return h};_ParseLineString=function(i){var j=[],h;var f=b.linestringOptionsCallback(c)||{};var k={strokeColor:f.strokeColor||"#000",strokeOpacity:f.strokeOpacity||"1.0",strokeWeight:f.strokeWeight||"5"};var l=0,g=i.length;for(l;l<g;l++){j.push(new google.maps.LatLng(i[l][1],i[l][0]))}h=new google.maps.Polyline({path:j,strokeColor:k.strokeColor,strokeOpacity:k.strokeOpacity,strokeWeight:k.strokeWeight,_GJTYPE:"line"});h.setMap(b.googleMap);b.linestringEventsCallback(h,e,k,c);return h};_ParsePolygon=function(h){var g=[],i;var l=0,f=h.length;for(l;l<f;l++){g.push(new google.maps.LatLng(h[l][1],h[l][0]))}var k=b.polygonOptionsCallback(c)||{};var j={strokeColor:k.strokeColor||"#FF0000",strokeOpacity:k.strokeOpacity||0.8,strokeWeight:k.strokeWeight||2,fillColor:k.fillColor||"#FF0000",fillOpacity:k.fillOpacity||0.35};i=new google.maps.Polygon({paths:g,strokeColor:j.strokeColor,strokeOpacity:j.strokeOpacity,strokeWeight:j.strokeWeight,fillColor:j.fillColor,fillOpacity:j.fillOpacity,_GJTYPE:"polygon"});i.setMap(b.googleMap);b.polygonEventsCallback(i,e,j,c);return i};var d=[];d=_ParseFeatureType(b.JSONSrc);return{shapes:d,hide:function(){var f=this.shapes.length;while(f--){this.shapes[f].hide()}},show:function(){var f=this.shapes.length;while(f--){this.shapes[f].show()}},remove:function(){var f=this.shapes.length;while(f--){this.shapes[f].remove()}this.shapes=[]}}};